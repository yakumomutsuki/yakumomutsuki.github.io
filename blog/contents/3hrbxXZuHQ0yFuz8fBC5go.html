<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>yakumomutsuki | blog | 技術ブログを作ってみた</title><meta name="description" content="yakumomutsuki | 技術ブログを作ってみた"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/eea3c046da3d9a13.css" as="style"/><link rel="stylesheet" href="/_next/static/css/eea3c046da3d9a13.css" data-n-g=""/><link rel="preload" href="/_next/static/css/46487d701d2fcb3f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/46487d701d2fcb3f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-97b5172eb27720ef.js" defer=""></script><script src="/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/_next/static/chunks/main-ef9379c68abd1065.js" defer=""></script><script src="/_next/static/chunks/pages/_app-092a492a8f456816.js" defer=""></script><script src="/_next/static/chunks/678-75de33d2a4ac1060.js" defer=""></script><script src="/_next/static/chunks/pages/blog/contents/%5Bid%5D-a323cd9607bd51d0.js" defer=""></script><script src="/_next/static/dIRgoe5Z17smq9BUDWkG_/_buildManifest.js" defer=""></script><script src="/_next/static/dIRgoe5Z17smq9BUDWkG_/_ssgManifest.js" defer=""></script><script src="/_next/static/dIRgoe5Z17smq9BUDWkG_/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><a href="/"><header class="hero is-dark header_Header__NaOBR"><div class="hero-body"><div class="container"><h1 class="title has-text-centered is-size-4-mobile">yakumomutsuki.github.io</h1></div></div></header></a><main class="container"><img class="_id__BlogContents__Img__ltHph" width="100%" height="200" src="https://images.ctfassets.net/xozap2abqkk7/2Vz3KqmRNfL3JDXNjN7VyO/163b9ea5d7b380285a2b6ded2eaa4e4c/scott-graham-5fNmWej4tAA-unsplash.jpeg.webp" alt=""/><div class="lead"><section class="content _id__BlogContents__Section__C0bJ7"><div class="icon-with-text_IconWithText__9gUKK"><img alt="作成日" width="24" height="24" src="/_next/static/media/edit-calendar.91cdeba1.svg"/><p class="icon-with-text_IconWithText__text__mXakU">2022-07-03</p></div><h1 class="_id__BlogContents__Heading__dFggL">技術ブログを作ってみた</h1><blockquote class="twitter-tweet"><p lang="ja" dir="ltr">技術ブログを作る理由って、素振りでしょ<!-- --></p>&amp;mdash; 八雲睦月／むったん (@yakumomutsuki) <!-- --><a href="https://twitter.com/yakumomutsuki/status/1541540259707891712?ref_src=twsrc%5Etfw">June 27, 2022<!-- --></a></blockquote><p>Twitterで言った手前、技術ブログを作りました。SEOとかアフィリエイトとか考えれば、はてなブログやnoteなどのサービスを使えばいいと思います。が、結局カスタマイズのしやすさや、最近話題のヘッドレスCMSをやってみた系の記事ということで、誰かの参考になれば幸いです。<!-- --></p><h2 id="cms">ヘッドレスCMSとはなにか<!-- --></h2><p>コンテンツは（外部）APIにて配信され、表示画面（ヘッド）はサービス運営者が実装します。そのためフロントエンドとなるWeb、モバイル(iPhone/Android)はそれぞれ実装をする必要がありますが、一方で言語やプラットフォームには左右されないため、さまざまなプラットフォームへの配信が可能となります。<!-- --></p><p>Contentful、microCMS、Prismicなどのサービスによってコンテンツを管理し、記事の入稿や編集はそれらサービスの管理画面にて行います。<!-- --></p><h2 id="">使用したライブラリ・サービス<!-- --></h2><ul><li>prismjs ソースコードのシンタックスハイライト<!-- --></li><li>markdown-to-jsx Markdown形式のテキストをJSXに埋め込む<!-- --></li><li>contentful 今回利用するcontentfulのAPIへ簡易にアクセスできるラッパーライブラリ<!-- --></li></ul><p>なお、本ブログのNext.js × TypeScriptをベースとしています。
シンタックスハイライトは以下のよう表示されます。<!-- --></p><pre class="language-javascript" tabindex="0"><code class="language-javascript">for( let i = 1; i &lt;= 100; i ++ ) {
  if( i % 15 === 0 ) {
   　console.log( &quot;FizzBuzz&quot; );
 　 } else if ( i % 5 === 0 ) {
  　  console.log( &quot;Buzz&quot; );
 　 } else if ( i % 3 === 0 ) {
   　 console.log( &quot;Fizz&quot; );
　  } else {
   　 console.log( i );
 　 }
 }</code></pre><h2 id="">型定義生成<!-- --></h2><p>型定義については、<!-- --><code class="">contentful-typescript-codegen</code> を利用して作成できます。環境変数はnpm scriptに直接記述しましたが、dotenv等を導入してもよいかもしれません。自分は、nextのenvと競合すると面倒なため、このような形に落ち着きました。<!-- --></p><p>package.json<!-- --></p><pre class="language-json" tabindex="0"><code class="language-json">&quot;contentful-typescript-codegen&quot;: &quot;CONTENTFUL_MANAGEMENT_API_ACCESS_TOKEN=xxxx CONTENTFUL_SPACE_ID=xxxx CONTENTFUL_ENVIRONMENT=xxxx contentful-typescript-codegen --output ./api/libs/contentful/types.d.ts&quot;</code></pre><h2 id="">所感<!-- --></h2><p>contentfulを導入して記事を表示させるだけなら、1日もかからずできるかと思います。どういうレイアウトにしようかとか、記事一覧も作ろう、コンポーネント一覧も作りたい、タグ検索もしたいなどあればいろいろ調整が必要となりますが、そうでなければ簡単に導入できると思います。<!-- --></p><p>GitHub Actions まわりが妙にはまってしまい、General → Secrets より、Repository secrets を設定して、contentfulまわりの秘密情報を設定するところを、General → Environments より環境変数を利用するものだと思いこんでしまい、デプロイするのに時間がかかりました。<!-- --></p><p><a href="https://docs.github.com/ja/actions/security-guides/encrypted-secrets">https://docs.github.com/ja/actions/security-guides/encrypted-secrets<!-- --></a></p><p>貼っておきますが、正直わかりにくいですよねこれ...。<!-- --></p><p>ソースコードのリンクを貼っておきますので、何かしらの参考になれば嬉しいです。<!-- --></p><p><a href="https://github.com/yakumomutsuki/yakumomutsuki.github.io">https://github.com/yakumomutsuki/yakumomutsuki.github.io<!-- --></a></p></section></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"技術ブログを作ってみた","headerImage":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"xozap2abqkk7"}},"id":"2Vz3KqmRNfL3JDXNjN7VyO","type":"Asset","createdAt":"2022-07-09T14:40:31.659Z","updatedAt":"2022-07-09T14:40:31.659Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"ja-JP"},"fields":{"title":"scott-graham-5fNmWej4tAA-unsplash.jpeg","description":"","file":{"url":"//images.ctfassets.net/xozap2abqkk7/2Vz3KqmRNfL3JDXNjN7VyO/163b9ea5d7b380285a2b6ded2eaa4e4c/scott-graham-5fNmWej4tAA-unsplash.jpeg.webp","details":{"size":1304192,"image":{"width":7360,"height":4912}},"fileName":"scott-graham-5fNmWej4tAA-unsplash.jpeg.webp","contentType":"image/webp"}}},"body":"\u003cblockquote className=\"twitter-tweet\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e技術ブログを作る理由って、素振りでしょ\u003c/p\u003e\u0026mdash; 八雲睦月／むったん (@yakumomutsuki) \u003ca href=\"https://twitter.com/yakumomutsuki/status/1541540259707891712?ref_src=twsrc%5Etfw\"\u003eJune 27, 2022\u003c/a\u003e\u003c/blockquote\u003e\n\nTwitterで言った手前、技術ブログを作りました。SEOとかアフィリエイトとか考えれば、はてなブログやnoteなどのサービスを使えばいいと思います。が、結局カスタマイズのしやすさや、最近話題のヘッドレスCMSをやってみた系の記事ということで、誰かの参考になれば幸いです。\n\n## ヘッドレスCMSとはなにか\n\nコンテンツは（外部）APIにて配信され、表示画面（ヘッド）はサービス運営者が実装します。そのためフロントエンドとなるWeb、モバイル(iPhone/Android)はそれぞれ実装をする必要がありますが、一方で言語やプラットフォームには左右されないため、さまざまなプラットフォームへの配信が可能となります。\n\nContentful、microCMS、Prismicなどのサービスによってコンテンツを管理し、記事の入稿や編集はそれらサービスの管理画面にて行います。\n\n## 使用したライブラリ・サービス\n\n- prismjs ソースコードのシンタックスハイライト\n- markdown-to-jsx Markdown形式のテキストをJSXに埋め込む\n- contentful 今回利用するcontentfulのAPIへ簡易にアクセスできるラッパーライブラリ\n\nなお、本ブログのNext.js × TypeScriptをベースとしています。\nシンタックスハイライトは以下のよう表示されます。\n\n```javascript\nfor( let i = 1; i \u003c= 100; i ++ ) {\n  if( i % 15 === 0 ) {\n   　console.log( \"FizzBuzz\" );\n 　 } else if ( i % 5 === 0 ) {\n  　  console.log( \"Buzz\" );\n 　 } else if ( i % 3 === 0 ) {\n   　 console.log( \"Fizz\" );\n　  } else {\n   　 console.log( i );\n 　 }\n }\n```\n\n## 型定義生成\n\n型定義については、`contentful-typescript-codegen` を利用して作成できます。環境変数はnpm scriptに直接記述しましたが、dotenv等を導入してもよいかもしれません。自分は、nextのenvと競合すると面倒なため、このような形に落ち着きました。\n\npackage.json\n\n```json\n\"contentful-typescript-codegen\": \"CONTENTFUL_MANAGEMENT_API_ACCESS_TOKEN=xxxx CONTENTFUL_SPACE_ID=xxxx CONTENTFUL_ENVIRONMENT=xxxx contentful-typescript-codegen --output ./api/libs/contentful/types.d.ts\"\n```\n\n## 所感\n\ncontentfulを導入して記事を表示させるだけなら、1日もかからずできるかと思います。どういうレイアウトにしようかとか、記事一覧も作ろう、コンポーネント一覧も作りたい、タグ検索もしたいなどあればいろいろ調整が必要となりますが、そうでなければ簡単に導入できると思います。\n\nGitHub Actions まわりが妙にはまってしまい、General → Secrets より、Repository secrets を設定して、contentfulまわりの秘密情報を設定するところを、General → Environments より環境変数を利用するものだと思いこんでしまい、デプロイするのに時間がかかりました。\n\nhttps://docs.github.com/ja/actions/security-guides/encrypted-secrets\n\n貼っておきますが、正直わかりにくいですよねこれ...。\n\nソースコードのリンクを貼っておきますので、何かしらの参考になれば嬉しいです。\n\nhttps://github.com/yakumomutsuki/yakumomutsuki.github.io\n","createdAt":"2022-07-04T00:00+09:00","editedAt":"2022-07-04T00:00+09:00"},"__N_SSG":true},"page":"/blog/contents/[id]","query":{"id":"3hrbxXZuHQ0yFuz8fBC5go"},"buildId":"dIRgoe5Z17smq9BUDWkG_","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>